!function(e){function n(n){for(var o,a,i=n[0],l=n[1],c=n[2],p=0,u=[];p<i.length;p++)a=i[p],s[a]&&u.push(s[a][0]),s[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(n);u.length;)u.shift()();return r.push.apply(r,c||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,i=1;i<t.length;i++){var l=t[i];0!==s[l]&&(o=!1)}o&&(r.splice(n--,1),e=a(a.s=t[0]))}return e}var o={},s={0:0},r=[];function a(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)a.d(t,o,function(n){return e[n]}.bind(null,o));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var c=0;c<i.length;c++)n(i[c]);var d=l;r.push([493,1]),t()}({284:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.index_html='\n  <!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>caterpillar</title>\n    <link rel="stylesheet" href="http://butterfly-home.oss-cn-beijing.aliyuncs.com/app.css">\n    \x3c!-- put additional styles and scripts here --\x3e\n    <style type="text/css">\n      html,\n      body {\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n      #mountNode {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- put markup and other contents here --\x3e\n    <div id="mountNode"></div>\n    <style id="caterpillar-style"></style>\n    <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"><\/script>\n    <script src="https://unpkg.com/react@16/umd/react.development.js"><\/script>\n    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"><\/script>\n    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"><\/script>\n    <script src="https://unpkg.com/lodash@4.17.11/lodash.js"><\/script>\n    <script src="http://butterfly-home.oss-cn-beijing.aliyuncs.com/butterflies.js"><\/script>\n  </body>\n  </html>\n  ',n.index_css="\n  .force-node {\n    position: absolute;\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    border-radius: 50%;\n    border: 1px solid #999;\n  }\n  ",n.index_jsx='\n  const mockData = {\n    nodes: [ {id: "0", index: "0", Class: BaseNode},\n              {id: "1", index: "1", Class: BaseNode},\n              {id: "2", index: "2", Class: BaseNode},\n              {id: "3", index: "3", Class: BaseNode},\n              {id: "4", index: "4", Class: BaseNode},\n              {id: "5", index: "5", Class: BaseNode},],\n    edges: [ {source: "0", target: "1"},\n             {source: "1", target: "2"},\n             {source: "1", target: "3"},\n             {source: "1", target: "4"},\n             {source: "1", target: "5"},],\n  };\n  \n  class ForceTree extends React.Component {\n    constructor() {\n      super();\n    }\n    componentDidMount() {\n      let root = document.getElementById(\'dag-canvas\');\n      this.canvas = new Canvas({\n        root: root,\n        disLinkable: true, // 可删除连线\n        linkable: false,    // 可连线\n        draggable: true,   // 可拖动\n        zoomable: true,    // 可放大\n        moveable: true,    // 可平移\n        layout: {\n          type: \'forceLayout\',\n          options: {\n            link: {\n              // 线条的距离\n              distance: 50,\n              // 线条的粗细\n              strength: 1\n            }\n          },\n        },\n        theme: {\n          edge: {\n            type: \'Straight\'\n          }\n        }\n      });\n      this.canvas.draw(mockData);\n    }\n    render() {\n      return (\n        <div className=\'force-tree-page\'>\n          <div className="force-tree-canvas" id="dag-canvas">\n          </div>\n        </div>\n      );\n    }\n  }\n  \n  ReactDOM.render(<ForceTree />, document.querySelector(\'#mountNode\'));\n  ',n.node_jsx="\n  class BaseNode extends Node {\n    constructor(opts) {\n      super(opts);\n      this.id = opts.id;\n      this.top = opts.top;\n      this.left = opts.left;\n      this.options = opts;\n    }\n    draw = (opts) => {\n      let container = $('<div class=\"force-node\"></div>')\n                      // .css('position', 'absolute')\n                      // .css('width', '30px')\n                      // .css('height', '30px')\n                      // .css('line-height', '30px')\n                      // .css('text-align', 'center')\n                      // .css('border-radius', '50%')\n                      // .css('border', '1px solid #999')\n                      .css('top', opts.top + 'px')\n                      .css('left', opts.left+ 'px')\n                      .attr('id', opts.id);\n\n      container.text(opts.options.index);\n\n      return container[0];\n    }\n  }\n  "},493:function(e,n,t){"use strict";var o,s=t(150),r=(o=s)&&o.__esModule?o:{default:o};t(622);var a=new r.default({name:"app",routeType:"hashHistory"}),i=t(623);a.model(i);var l=t(629);a.route(l),a.ajax.beforeRequest(function(e){if(e.mock)return Promise.resolve(e.mock)}),a.run(document.getElementById("main")),e.exports=a},620:function(e,n,t){},621:function(e,n,t){},622:function(e,n,t){},623:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s=t(150),r=(o=s)&&o.__esModule?o:{default:o};n.default=r.default.createModel({displayName:"tpl",store:{loadingTpl:!1,tplDatas:[]},actions:{getTpl:{callback:{start:function(e){e.loadingTpl=!0},success:function(e,n){e.tplDatas=n.data.tplDatas||[],e.loadingTpl=!1},error:function(e){e.loadingTpl=!1}}}}},t(624)),e.exports=n.default},624:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=l(t(284)),s=l(t(625)),r=l(t(626)),a=l(t(627)),i=l(t(628));function l(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}n.default={getTpl:{url:"mock/api/tpl",method:"GET",mock:{tplDatas:[{id:"force",name:"力导向图",thumbnail:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/thumbmail-force.png",editorsData:{html:[{id:"index_html",name:"index.html",type:"html",content:o.index_html}],css:[{id:"index_css",name:"index.css",type:"css",content:o.index_css}],jsx:[{id:"node_jsx",name:"node.jsx",type:"jsx",content:o.node_jsx},{id:"index_jsx",name:"index.jsx",type:"jsx",content:o.index_jsx}],transpiledCode:"",transpiledStyle:"",error:null}},{id:"industrial",name:"工艺流程",thumbnail:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/thumbmail-industrial.png",editorsData:{html:[{id:"index_html",name:"index.html",type:"html",content:s.index_html}],css:[{id:"node_css",name:"node.css",type:"css",content:s.node_css},{id:"edge_css",name:"edge.css",type:"css",content:s.edge_css},{id:"index_css",name:"index.css",type:"css",content:s.index_css}],jsx:[{id:"node_jsx",name:"node.jsx",type:"jsx",content:s.node_jsx},{id:"edge_jsx",name:"edge.jsx",type:"jsx",content:s.edge_jsx},{id:"index_jsx",name:"index.jsx",type:"jsx",content:s.index_jsx}],transpiledCode:"",transpiledStyle:"",error:null}},{id:"iot",name:"Iot",thumbnail:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/thumbmail-iot.png",editorsData:{html:[{id:"index_html",name:"index.html",type:"html",content:r.index_html}],css:[{id:"node_css",name:"node.css",type:"css",content:r.node_css},{id:"index_css",name:"index.css",type:"css",content:r.index_css}],jsx:[{id:"node_jsx",name:"node.jsx",type:"jsx",content:r.node_jsx},{id:"index_jsx",name:"index.jsx",type:"jsx",content:r.index_jsx}],transpiledCode:"",transpiledStyle:"",error:null}},{id:"industry",name:"工业",thumbnail:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/thumbmail-industry.png",editorsData:{html:[{id:"index_html",name:"index.html",type:"html",content:a.index_html}],css:[{id:"node_css",name:"node.css",type:"css",content:a.node_css},{id:"canvas_css",name:"canvas.css",type:"css",content:a.canvas_css},{id:"index_css",name:"index.css",type:"css",content:a.index_css}],jsx:[{id:"node_jsx",name:"node.jsx",type:"jsx",content:a.node_jsx},{id:"canvas_jsx",name:"canvas.jsx",type:"jsx",content:a.canvas_jsx},{id:"index_jsx",name:"index.jsx",type:"jsx",content:a.index_jsx}],transpiledCode:"",transpiledStyle:"",error:null}},{id:"flow",name:"流程图",thumbnail:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/thumbmail-flow.png",editorsData:{html:[{id:"index_html",name:"index.html",type:"html",content:i.index_html}],css:[{id:"node_css",name:"node.css",type:"css",content:i.node_css},{id:"index_css",name:"index.css",type:"css",content:i.index_css}],jsx:[{id:"node_jsx",name:"node.jsx",type:"jsx",content:i.node_jsx},{id:"computer_jsx",name:"computer.jsx",type:"jsx",content:i.computer_jsx},{id:"judgement_jsx",name:"judgement.jsx",type:"jsx",content:i.judgement_jsx},{id:"people_jsx",name:"people.jsx",type:"jsx",content:i.people_jsx},{id:"search_jsx",name:"search.jsx",type:"jsx",content:i.search_jsx},{id:"suspect_jsx",name:"suspect.jsx",type:"jsx",content:i.suspect_jsx},{id:"testEdge_jsx",name:"edge.jsx",type:"jsx",content:i.testEdge_jsx},{id:"index_jsx",name:"index.jsx",type:"jsx",content:i.index_jsx}],transpiledCode:"",transpiledStyle:"",error:null}}]}}},e.exports=n.default},625:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.index_html='\n  <!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>caterpillar</title>\n    \x3c!-- put additional styles and scripts here --\x3e\n    <style type="text/css">\n      html,\n      body {\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- put markup and other contents here --\x3e\n    <div id="mountNode"></div>\n    <style id="caterpillar-style"></style>\n    <script id="caterpillar-script"><\/script>\n    <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"><\/script>\n    <script src="https://unpkg.com/react@16/umd/react.development.js"><\/script>\n    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"><\/script>\n    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"><\/script>\n    <script src="https://unpkg.com/lodash@4.17.11/lodash.js"><\/script>\n    <script src="http://butterfly-home.oss-cn-beijing.aliyuncs.com/butterflies.js"><\/script>\n  </body>\n  </html>\n  ',n.index_css="\n  .industrial-page {\n    position: relative;\n    height: 100%;\n    width: 100%;\n    .industrial-canvas{\n      height: 100%;\n      width: 100%;\n      background:  url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/base.jpg') ;\n      .label-name-title{\n        position: absolute;\n        top: 10px;\n        .label-name-box{\n          position: relative;\n          span:nth-of-type(1){\n            position: absolute;\n            top: -24px;\n            left: -24px;\n            width: 48px; \n            text-align: center;\n            background: rgba(52,52,52,0.50);\n            padding: 3px;\n            border: 1px solid #75aa5a;\n            border-radius: 10px;\n            opacity: 0.9;\n            font-family: FZLTZHK--GBK1-0;\n            font-size: 6px;\n            color: rgba(254,254,254,.7);\n          }\n          span:nth-of-type(2){\n            position: absolute;\n            top: 10px;\n            width: 60px; \n            left: -30px;\n            height: 18px;\n            padding: 3px;\n            text-align: center;\n            opacity: 0.85;\n            background: rgba(0,0,0,0.20);\n            box-shadow: 0 2px 4px 0 rgba(0,0,0,0.20);\n            border-radius: 2px;\n            font-size: 6px;\n            color: rgba(255,255,255, .8);\n          }\n          &.number-two{\n            span:nth-of-type(1){\n              border: 1px solid #d451b0;\n            }\n          }\n          &.number-three{\n            span:nth-of-type(1){\n              border: 1px solid #75aa5a;\n            }\n          }\n          &.number-one{\n            span:nth-of-type(1){\n              border: 1px solid #603bb0;\n            }\n          }\n        }\n        .style-blue{\n          stroke: blue!important;\n        }\n      }\n    }\n  }\n  ",n.index_jsx="\n  \n  const mockData = {\n    nodes: [{\n      id: '0',\n      name: 'API请求',\n      type: 'black',\n      top: 33,\n      title: '粉碎',\n      left: 501,\n      titleName: 'node-no1',\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n      }],\n      Class: BaseNode\n    }, {\n      id: '2',\n      name: '路由',\n      type: 'blue_2',\n      title: '发酵',\n      top: 57.6,\n      left: 158,\n      titleName: 'node-no2',\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'target',\n      }, {\n        id: 'point_2',\n        type: 'source',\n      }],\n      Class: BaseNode\n    }, {\n      id: '3',\n      name: '服务',\n      type: 'blue_3',\n      top: 207.6,\n      left: 143.4,\n      titleName: 'node-no3',\n      title: '蒸馏',\n      data: {},\n      endpoints: [{\n        id: 'point_3',\n        type: 'source',\n      }, {\n        id: 'point_2',\n        type: 'target',\n      }],\n      Class: BaseNode\n    }, {\n      id: '4',\n      name: 'API返回',\n      type: 'green',\n      data: {},\n      top: 339,\n      titleName: 'node-no4',\n      left: 137,\n      title: '冷凝',\n      endpoints: [{\n        id: 'point_4',\n        type: 'source',\n      }, {\n        id: 'point_3',\n        type: 'target',\n      }],\n      Class: BaseNode\n    }, {\n      id: '5',\n      name: 'API返回',\n      type: 'green',\n      title: '白酒',\n      top: 394,\n      left: 314,\n      titleName: 'node-no5',\n      data: {},\n      endpoints: [{\n        id: 'point_5',\n        type: 'source',\n      }, {\n        id: 'point_4',\n        type: 'target',\n      }],\n      Class: BaseNode\n    }],\n    edges: [{\n      source: 'point_1',\n      target: 'point_1',\n      sourceNode: '0',\n      label: $('<div class=\"label-name-title\"><div class=\"label-name-box\"><span>处理</span><span>2019/01/01</span></div></div>')[0],\n      targetNode: '2',\n      arrow: true,\n      style: 'style-blue',\n      type: 'endpoint',\n    }, {\n      source: 'point_2',\n      target: 'point_2',\n      sourceNode: '2',\n      targetNode: '3',\n      style: 'style-red',\n      arrow: true,\n      label: $('<div class=\"label-name-title\"><div class=\"label-name-box number-one\"><span>处理</span><span>2019/01/01</span></div></div>')[0],\n      type: 'endpoint',\n    }, {\n      source: 'point_3',\n      target: 'point_3',\n      sourceNode: '3',\n      targetNode: '4',\n      label: $('<div class=\"label-name-title\"><div class=\"label-name-box number-two\"><span>处理</span><span>2019/01/01</span></div></div>')[0],\n      style: 'style-black',\n      arrow: true,\n      type: 'endpoint',\n    }, {\n      source: 'point_4',\n      target: 'point_4',\n      sourceNode: '4',\n      label: $('<div class=\"label-name-title\"><div class=\"label-name-box number-three\"><span>处理</span><span>2019/01/01</span></div></div>')[0],\n      style: 'style-pick',\n      arrow: true,\n      targetNode: '5',\n      type: 'endpoint',\n    }]\n  };\n  \n  class Industrial extends React.Component {\n    constructor() {\n      super();\n    }\n    componentDidMount() {\n      let root = document.getElementById('dag-canvas');\n      this.canvas = new Canvas({\n        root: root,\n        disLinkable: true, // 可删除连线\n        linkable: false,    // 可连线\n        draggable: true,   // 可拖动\n        zoomable: true,    // 可放大\n        moveable: true,    // 可平移\n        css: {\n          groupHoverClass: 'datac-group-drag-hover',   // 节点移动到上面新增的class \n          groupActiveClass: 'datac-group-drag-active'   // 节点可移动到上面新增的class\n        },\n        theme: {\n          edge: {\n            Class: BaseEdge\n          },\n          endpoint: {\n            style: {\n              fill: '#8fa4ae',\n              stroke: '#8fa4ae',\n              radius: 3,\n              'stroke-width': 1\n            },\n            hover: {\n              fill: '#20c1dc',\n              stroke: '#20c1dc'\n            },\n            position: ['Top', 'Bottom', 'Left', 'Right']\n          }\n        }\n      });\n      // console.log(mockData);\n      mockData.nodes.forEach((item) => {\n        let endpoints = item.endpoints;\n        let sourceE = endpoints.filter((item) => {\n          return item.type === 'source';\n        });\n        let targetE = endpoints.filter((item) => {\n          return item.type === 'target';\n        });\n  \n        sourceE.forEach((e, index) => {\n          if (e.type === 'source') {\n            e.orientation = [0, 1];\n          } else {\n            e.orientation = [0, -1];\n          }\n          e.pos = [(index + 1) / (sourceE.length + 1), 0];\n        });\n        targetE.forEach((e, index) => {\n          if (e.type === 'source') {\n            e.orientation = [0, 1];\n          } else {\n            e.orientation = [0, -1];\n          }\n          e.pos = [(index + 1) / (targetE.length + 1), 0];\n        });\n      });\n      this.canvas.draw(mockData);\n    }\n    render() {\n      return (\n        <div className='industrial-page'>\n          <div className=\"industrial-canvas\" id=\"dag-canvas\">\n          </div>\n        </div>\n      );\n    }\n  }\n  \n  ReactDOM.render(<Industrial />, document.querySelector('#mountNode'));\n  \n  ",n.node_jsx="\n  class BaseNode extends Node {\n    constructor(opts) {\n      super(opts);\n      this.id = opts.id;\n      this.top = opts.top;\n      this.left = opts.left;\n      this.options = opts;\n    }\n    draw = (opts) => {\n      let container = $('<div class=\"industrial-node\"></div>')\n                      .css('top', opts.top + 'px')\n                      .addClass(_.get(opts, 'options.titleName'))\n                      .css('left', opts.left+ 'px')\n                      .attr('id', opts.id);\n     let   adadfa = $('<div class=\"industrial-node-box\"></div>')\n     \n     let  title = $('<span class=\"industrial-node-title\"></span>')\n                      .css('top', '-20px')\n                      .css('left', '35%');\n                      title.text(opts.options.title);\n                      title.appendTo(adadfa);\n                      adadfa.appendTo(container);\n      return container[0];\n    }\n  }\n  ",n.node_css="\n.industrial-node {\n  position: absolute;\n  width: 78px;\n  height: 42px;\n  text-align: center;\n  border-radius: 20%;\n  .industrial-node-box{\n    position: relative;\n    height: 100%;\n    width: 100%;\n  }\n  .industrial-node-title{\n    position: absolute;\n    opacity: 0.9;\n    font-family: FZLTZHK--GBK1-0;\n    font-size: 6px;\n    color: rgba(254,254,254,.7);\n  }\n  &.node-no1{\n    background: url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/1.png');\n    background-size: 100% 100%;\n  }\n  &.node-no2{\n    background: url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/2.png');\n    background-size: 100% 100%;\n  }\n  &.node-no3{\n    background: url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/3.png');\n    background-size: 100% 100%;\n  }\n  &.node-no4{\n    background: url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/4.png');\n    background-size: 100% 100%;\n  }\n  &.node-no5{\n    background: url('http://butterfly-home.oss-cn-beijing.aliyuncs.com/industrial/5.png');\n    background-size: 100% 100%;\n  }\n\n}\n",n.edge_jsx="\nclass BaseEdge extends Edge {\n  constructor(opts) {\n    super(opts);\n  }\n  draw(obj) {\n    let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    let style = _.get(obj, 'options.style');\n    path.setAttribute('class', 'butterflies-link ' + style);\n    return path;\n  }\n  drawArrow(obj) {\n    if (obj) {\n      let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n      let style = _.get(this, 'options.style');\n      path.setAttribute('class', 'butterflies-arrow ' + style);\n      return path;\n    }\n  }\n}\n",n.edge_css="\n.style-blue{\n  fill: none;\n  stroke: #75aa5a!important;\n  stroke-width: 1px;\n}\n.style-black{\n    fill: none;\n    stroke: #d451b0!important;\n    stroke-width: 1px;\n}\n.style-white{\n    fill: none;\n    stroke: #ff7e1d!important;\n    stroke-width: 1px;\n}\n.style-pick{\n    fill: none;\n    stroke: #ff7e1d!important;\n    stroke-width: 1px;\n}\n.style-red{\n    fill: none;\n    stroke: #603bb0!important;\n    stroke-width: 1px;\n}\n"},626:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.index_html='\n  <!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>caterpillar</title>\n    \x3c!-- put additional styles and scripts here --\x3e\n    <style type="text/css">\n      html,\n      body {\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n      #mountNode {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- put markup and other contents here --\x3e\n    <div id="mountNode"></div>\n    <style id="caterpillar-style"></style>\n    <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"><\/script>\n    <script src="https://unpkg.com/react@16/umd/react.development.js"><\/script>\n    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"><\/script>\n    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"><\/script>\n    <script src="https://unpkg.com/lodash@4.17.11/lodash.js"><\/script>\n    <script src="http://butterfly-home.oss-cn-beijing.aliyuncs.com/butterflies.js?Expires=1556439311&OSSAccessKeyId=TMP.AgHN3DTxMUb4bIyZiw25AK1MtQy2v-vnr-9lfyhR29owh6wFZoVheOnGrhuyMC4CFQC5MBPP1rVqcL3AitI-aFdumViVEAIVAMDc25DiEI2izpOaLZ5bFOnu97l3&Signature=iSEMSucRJ0RyX2CW0rQ5Ctxidjk%3D"><\/script>\n    <script id="caterpillar-script"><\/script>\n  </body>\n  </html>\n  ',n.index_css="\n  .iot-page {\n    width: 100%;\n    height: 100%;\n    .iot-canvas {\n      position: relative;\n      width: 100%;\n      height: 100%;\n    }\n  }\n  ",n.index_jsx="\n  const mockData = {\n    nodes: [{\n      id: '0',\n      name: 'API请求',\n      type: 'black',\n      top: 100,\n      left: 250,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n      }],\n      Class: BaseNode\n    }, {\n      id: '1',\n      name: '脚本abc',\n      type: 'blue_1',\n      top: 180,\n      left: 250,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n      }, {\n        id: 'point_2',\n        type: 'target',\n      }],\n      Class: BaseNode\n    }, {\n      id: '2',\n      name: '路由',\n      type: 'blue_2',\n      top: 260,\n      left: 210,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'target',\n      }, {\n        id: 'point_2',\n        type: 'source',\n      }, {\n        id: 'point_3',\n        type: 'source',\n      }],\n      Class: BaseNode\n    }, {\n      id: '3',\n      name: '服务',\n      type: 'blue_3',\n      top: 340,\n      left: 190,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n        // scope: 'a'\n      }, {\n        id: 'point_2',\n        type: 'target',\n        // scope: 'a'\n      }],\n      Class: BaseNode\n    }, {\n      id: '4',\n      name: 'API返回',\n      type: 'green',\n      data: {},\n      top: 420,\n      left: 190,\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n      }, {\n        id: 'point_2',\n        type: 'target',\n      }],\n      Class: BaseNode\n    }, {\n      id: '5',\n      name: 'API返回',\n      type: 'green',\n      top: 420,\n      left: 350,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n        // scope: 'b'\n      }, {\n        id: 'point_2',\n        type: 'target',\n        // scope: 'b'\n      }],\n      Class: BaseNode\n    }, {\n      id: '6',\n      name: 'group测试',\n      type: 'green',\n      top: 50,\n      left: 25,\n      data: {},\n      endpoints: [{\n        id: 'point_1',\n        type: 'source',\n        // scope: 'b'\n      }, {\n        id: 'point_2',\n        type: 'target',\n        // scope: 'b'\n      }],\n      group: 'group_1',\n      Class: BaseNode\n    }],\n    groups: [{\n      id: 'group_1',\n      top: 100,\n      left: 50\n    }],\n    edges: [{\n      source: 'point_1',\n      target: 'point_1',\n      sourceNode: '0',\n      targetNode: '2',\n      type: 'endpoint'\n    }]\n  };\n  \n  class Iot extends React.Component {\n    constructor() {\n      super();\n    }\n    componentDidMount() {\n      let root = document.getElementById('dag-canvas');\n      this.canvas = new Canvas({\n        root: root,\n        disLinkable: true, // 可删除连线\n        linkable: false,    // 可连线\n        draggable: true,   // 可拖动\n        zoomable: true,    // 可放大\n        moveable: true,    // 可平移\n        css: {\n          groupHoverClass: 'datac-group-drag-hover',   // 节点移动到上面新增的class \n          groupActiveClass: 'datac-group-drag-active'   // 节点可移动到上面新增的class\n        },\n        theme: {\n          // edge: {\n          //   type: 'Flowchart'\n          // },\n          endpoint: {\n            style: {\n              fill: '#8fa4ae',\n              stroke: '#8fa4ae',\n              radius: 3,\n              'stroke-width': 1\n            },\n            hover: {\n              fill: '#20c1dc',\n              stroke: '#20c1dc'\n            },\n            position: ['Top', 'Bottom', 'Left', 'Right']\n          }\n        }\n      });\n  \n      mockData.nodes.forEach((item) => {\n        let endpoints = item.endpoints;\n        let sourceE = endpoints.filter((item) => {\n          return item.type === 'source';\n        });\n        let targetE = endpoints.filter((item) => {\n          return item.type === 'target';\n        });\n  \n        sourceE.forEach((e, index) => {\n          if (e.type === 'source') {\n            e.orientation = [0, 1];\n          } else {\n            e.orientation = [0, -1];\n          }\n          e.pos = [(index + 1) / (sourceE.length + 1), 0];\n        });\n        targetE.forEach((e, index) => {\n          if (e.type === 'source') {\n            e.orientation = [0, 1];\n          } else {\n            e.orientation = [0, -1];\n          }\n          e.pos = [(index + 1) / (targetE.length + 1), 0];\n        });\n      });\n      this.canvas.draw(mockData);\n\n      this.canvas.on('events', (data) => {\n        console.log(data);\n      });\n    }\n    render() {\n      return (\n        <div className='iot-page'>\n          <div className=\"iot-canvas\" id=\"dag-canvas\">\n          </div>\n        </div>\n      );\n    }\n  }\n  \n  ReactDOM.render(<Iot />, document.querySelector('#mountNode'));\n  ",n.node_jsx="\n  class BaseNode extends Node {\n    constructor(opts) {\n      super(opts);\n      this.options = opts;\n      this.typeIcon = null;\n    }\n    draw = (opts) => {\n      let className = this.options.type;\n  \n      let container = $('<div class=\"iot-node\"></div>')\n                      .css('top', opts.top + 'px')\n                      .css('left', opts.left+ 'px')\n                      .addClass(className)\n                      .attr('id', opts.id);\n  \n      this._createTypeIcon(container);\n      this._createText(container);\n  \n      return container[0];\n    }\n\n    _createTypeIcon(dom = this.dom) {\n      this.typeIcon = $('<span class=\"icon-box\"></span>')[0];\n      $(dom).append(this.typeIcon);\n    }\n  \n    _createText(dom = this.dom) {\n      $('<span class=\"text-box\"></span>').text(this.options.name).appendTo(dom);\n    }\n  }\n  ",n.node_css="\n.iot-node {\n  position: absolute;\n  height: 32px;\n  width: 102px;\n  line-height: 28px;\n  text-align: center;\n  background: #fff;\n  vertical-align: middle;\n  border-radius: 5px;\n  &.black {\n    border: 1px solid #656565;\n    .icon-box {\n      background: #656565;\n    }\n  }\n  &.blue_1 {\n    border: 1px solid #1481d3;\n    .icon-box {\n      background: #1481d3; \n    }\n  }\n  &.blue_2 {\n    border: 1px solid #52b7fc;\n    .icon-box {\n      background: #52b7fc; \n    }\n  }\n  &.blue_3 {\n    border: 1px solid #1892ee;\n    .icon-box {\n      background: #1892ee; \n    }\n  }\n  &.green {\n    border: 1px solid #73c2a5;\n    .icon-box {\n      background: #73c2a5;\n    }\n  }\n  .icon-box {\n    display: inline-block;\n    height: 30px;\n    width: 30px;\n    vertical-align: middle;\n  }\n  .text-box{\n    display: inline-block;\n    height: 30px;\n    width: 70px;\n    line-height: 30px;\n    vertical-align: middle;\n  }\n  .endpoint-box{\n    margin: 5px;\n    border: 1px dashed #000;\n  }\n}\n"},627:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.index_html='\n  <!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>caterpillar</title>\n    <link rel="stylesheet" href="http://butterfly-home.oss-cn-beijing.aliyuncs.com/app.css">\n    \x3c!-- put additional styles and scripts here --\x3e\n    <style type="text/css">\n      html,\n      body {\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n      #mountNode {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- put markup and other contents here --\x3e\n    <div id="mountNode"></div>\n    <style id="caterpillar-style"></style>\n    <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"><\/script>\n    <script src="https://unpkg.com/react@16/umd/react.development.js"><\/script>\n    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"><\/script>\n    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"><\/script>\n    <script src="https://unpkg.com/lodash@4.17.11/lodash.js"><\/script>\n    <script src="http://butterfly-home.oss-cn-beijing.aliyuncs.com/butterflies.js?Expires=1556439311&OSSAccessKeyId=TMP.AgHN3DTxMUb4bIyZiw25AK1MtQy2v-vnr-9lfyhR29owh6wFZoVheOnGrhuyMC4CFQC5MBPP1rVqcL3AitI-aFdumViVEAIVAMDc25DiEI2izpOaLZ5bFOnu97l3&Signature=iSEMSucRJ0RyX2CW0rQ5Ctxidjk%3D"><\/script>\n    <script id="caterpillar-script"><\/script>\n  </body>\n  </html>\n  ',n.index_css="\n  .industry-page {\n    height: 100%;\n    width: 100%;\n    .industry-canvas{\n      position: relative;\n      height: 100%;\n      width: 100%;\n      background: #ebeef1;\n    }\n  }\n  ",n.index_jsx="\n  const mockData = {\n    nodes: [{\n      id: 0,\n      name: '乙二醇MEG(液体)',\n      type: 'grap',\n      top: 50,\n      left: 50,\n      data: {},\n      Class: BaseNode\n    }, {\n      id: 1,\n      name: 'PAT(粉末)',\n      type: 'grap',\n      top: 200,\n      left: 50,\n      data: {},\n      Class: BaseNode\n    }, {\n      id: 2,\n      name: '乙二醇MEG(液体)',\n      type: 'green',\n      top: 350,\n      left: 50,\n      data: {},\n      Class: BaseNode\n    }, {\n      id: 3,\n      name: '第一酯化(260度)',\n      type: 'blue',\n      top: 200,\n      left: 250,\n      data: {},\n      Class: BaseNode\n    }, {\n      id: 4,\n      name: '第二酯化(260度)',\n      type: 'blue',\n      top: 200,\n      left: 450,\n      data: {},\n      Class: BaseNode\n    }]\n  };\n  \n  class Industry extends React.Component {\n    constructor() {\n      super();\n    }\n    componentDidMount() {\n      let root = document.getElementById('dag-canvas');\n      this.canvas = new IndustryCanvas({\n        root: root,\n        disLinkable: true, // 可删除连线\n        linkable: false,    // 可连线\n        draggable: true,   // 可拖动\n        zoomable: true,    // 可放大\n        moveable: true,    // 可平移\n        css: {\n          groupHoverClass: 'datac-group-drag-hover',   // 节点移动到上面新增的class \n          groupActiveClass: 'datac-group-drag-active'   // 节点可移动到上面新增的class\n        },\n        theme: {\n          edge: {\n            type: 'Flowchart'\n          },\n          endpoint: {\n            style: {\n              fill: '#8fa4ae',\n              stroke: '#8fa4ae',\n              radius: 3,\n              'stroke-width': 1\n            },\n            hover: {\n              fill: '#20c1dc',\n              stroke: '#20c1dc'\n            },\n            position: ['Top', 'Bottom', 'Left', 'Right']\n          }\n        }\n      });\n      this.canvas.draw(mockData);\n      \n    }\n    render() {\n      return (\n        <div className='industry-page'>\n          <div className=\"industry-canvas\" id=\"dag-canvas\">\n          </div>\n        </div>\n      );\n    }\n  }\n  \n  ReactDOM.render(<Industry />, document.querySelector('#mountNode'));\n  ",n.node_jsx="\n  class BaseNode extends Node {\n    constructor(opts) {\n      super(opts);\n      this.options = opts;\n      this._endpoint = [];\n      this._isInNode = false;\n      this._isInEndpoint = false;\n    }\n    draw = (opts) => {\n      let container = $('<div class=\"base-node\"></div>')\n                      .css('top', opts.top)\n                      .css('left', opts.left)\n                      .attr('id', opts.id);\n  \n      let icon = $('<i class=\"datac-icon\">&#xe6ad;</i>')[0];\n  \n      let logoContainer = $('<div class=\"logo-container\"></div>');\n      logoContainer.append(icon);\n  \n      let content = $('<p class=\"text\"></p>').text(opts.options.name);\n  \n      container.append(logoContainer).append(content);\n  \n      container.on('mouseover', (e) => {\n        this._isInNode = true;\n        this._showEndpoints();\n      });\n      container.on('mouseout', (e) => {\n        this._isInNode = false;\n        this._hideEndpoints();\n      });\n  \n      this._createIcon(container[0]);\n      \n      setTimeout(() => {\n        this._addEndpoint();\n      });\n  \n      return container[0];\n    }\n    focus = () => {\n      $(this.dom).find('.logo-toolbar').addClass('show');\n    }\n    unFocus = () => {\n      $(this.dom).find('.logo-toolbar').removeClass('show');\n    }\n    _createIcon(dom = this.dom) {\n      let logoContainer = $('<div class=\"logo-toolbar datac-icon\"></div>');\n      logoContainer.append($('<i class=\"first-icon datac-icon\">&#xe6ad;</i>'));\n      logoContainer.append($('<i class=\"second-icon datac-icon\">&#xe6ad;</i>'));\n      logoContainer.append($('<i class=\"third-icon datac-icon\">&#xe6ad;</i>'));\n      $(dom).append(logoContainer);\n    }\n    _addEndpoint(dom = this.dom) {\n      // 抽象\n      let position = ['Left', 'Right', 'Top', 'Bottom'];\n      position.forEach((pos) => {\n        let pointJsplumb = this._jsplumb.addEndpoint(dom, {\n          maxConnections: -1,\n          isSource: true,\n          isTarget: true,\n          parameters: {\n            [this.id + '-' + pos]: {\n              nodeId: this.id,\n              id: this.id + '-' + pos,\n              pos: pos\n            }\n          },\n          cssClass: 'hide-endpoint',\n          connector: [ this._theme.edge.type, this._theme.edge.config],\n          dropOptions: { \n            hoverClass: 'endpoint-hover',\n            activeClass: 'endpoint-active'\n          },\n          connectorOverlays: [\n            ['Arrow', {width: 5, length: 5, location: 1}],\n            ['Custom', {\n              create: (conn) => {\n                let label = $('<div class=\"label-container\"></div>');\n                label.on('click', (e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  // this.emit('events', {\n                  //   type: 'label:click',\n                  //   data: conn\n                  // });\n                });\n                label.append('删除');\n                return label;\n              },\n              location: 0.5,\n              // label: '+',\n              visible: true\n            }]\n          ]\n        }, {\n          anchor: [pos],\n          uuid: this.id + '-' + pos\n        });\n        $(pointJsplumb.canvas).on('mouseover', () => {\n          this._isInEndpoint = true;\n        });\n        $(pointJsplumb.canvas).on('mouseout', () => {\n          this._isInEndpoint = false;\n          this._hideEndpoints();\n        });\n        this._endpoint.push({\n          id: this.id + '-' + pos,\n          nodeId: this.id,\n          pos: pos,\n          jsplumbObj: pointJsplumb\n        });\n      });\n    }\n    _showEndpoints() {\n      this._endpoint.forEach((point) => {\n        $(point.jsplumbObj.canvas).removeClass('hide-endpoint');\n      });\n    }\n    _hideEndpoints() {\n      setTimeout(() => {\n        if (!this._isInNode && !this._isInEndpoint) {\n          this._endpoint.forEach((point) => {\n            $(point.jsplumbObj.canvas).addClass('hide-endpoint');\n          });\n        }\n      }, 50);\n    }\n    _makeSource(dom) {\n      this.makeSource({\n        endpoint: {\n          type: 'Dot',\n          style: {radius: 1, cssClass: 'small-blue'}\n        }\n      }, dom);\n    }\n    _makeTarget(dom) {\n      this.makeTarget({\n        endpoint: {\n          type: 'Dot',\n          style: {radius: 1, cssClass: 'large-green'}\n        }\n      }, dom);\n    }\n  }\n  ",n.node_css="\n.base-node {\n  position: absolute;\n  border: none;\n  border-radius: 5px;\n  background: #fff;\n  padding: 10px;\n  width: 120px;\n  height: 70px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid #00C1DE;\n  }\n  .logo-container{\n    cursor: move;\n    text-align: center;\n    margin-bottom: 5px;\n  }\n  .text {\n    text-align: center;\n  }\n  .logo-toolbar {\n    position: absolute;\n    top: -35px;\n    display: none;\n    &.show {\n      display: block;\n    }\n    .datac-icon {\n      border-radius: 3px;\n      padding: 6px;\n      background: #859da9;\n      color: #fff;\n      margin-right: 7px;\n      &:hover {\n        background: #61c8d9;\n      }\n    }\n  }\n  .endpoint-hover, .endpoint-active {\n    \n  }\n}\n",n.canvas_jsx="\nconst EVENTTYPE  = {\n  NODECLICK: 'node:click',\n  CANVASCLICK: 'canvas:click'\n};\n\nclass IndustryCanvas extends Canvas {\n  constructor(...args) {\n    super(...args);\n    this.listenEventProxy();\n  }\n  connection(conn) {\n    // 拼接数据\n    let sourceNode = null;\n    let sourceEndpoint = null;\n    let targetNode = null;\n    let targetEndpoint = null;\n    let param = conn.connection.getParameters();\n    _.map(param, (val, key) => {\n      let node = this.getNode(val.nodeId);\n      let endpoint = _.find(node._endpoint, (point) => {\n        return point.id = val.id;\n      });\n      if (conn.sourceId.toString() === node.id.toString()) {\n        sourceNode = node;\n        sourceEndpoint = endpoint;\n      } else {\n        targetNode = node;\n        targetEndpoint = endpoint;\n      }\n    });\n    // 考虑把endpoint展示掉\n    // sourceEndpoint.isShow = true;\n    // targetEndpoint.isShow = true;\n    this.edges.push({\n      id: sourceEndpoint.id + '-' + targetNode.id,\n      sourceNode: sourceNode.id,\n      source: sourceEndpoint.id,\n      sourcePos: sourceEndpoint.pos,\n      targetNode: targetNode.id,\n      target: targetEndpoint.id,\n      targetPos: targetEndpoint.pos\n    });\n  }\n  listenEventProxy() {\n    this.on('events', (data) => {\n      if (data.type.indexOf(EVENTTYPE.NODECLICK) !== -1) {\n        // 取消所有节点focus\n        this._unFocusAllNode();\n        let node = data.node;\n        node.focus();\n      } else if (data.type.indexOf(EVENTTYPE.CANVASCLICK) !== -1) {\n        // 取消所有节点focus\n        this._unFocusAllNode();\n      }\n    });\n  }\n  _unFocusAllNode() {\n    this.nodes.forEach((node) => {\n      node.unFocus();\n    });\n  }\n}\n",n.canvas_css="\n.industry-canvas {\n  .jtk-overlay {\n    display: none;\n    &.jtk-hover {\n      display: block;\n    }\n  }\n  .hide-endpoint {\n    display: none;\n    &.endpoint-active {\n      display: block;\n    }\n  }\n}\n"},628:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.index_html='\n  <!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>caterpillar</title>\n    <link rel="stylesheet" href="http://butterfly-home.oss-cn-beijing.aliyuncs.com/app.css">\n    \x3c!-- put additional styles and scripts here --\x3e\n    <style type="text/css">\n      html,\n      body {\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n      #mountNode {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- put markup and other contents here --\x3e\n    <div id="mountNode"></div>\n    <style id="caterpillar-style"></style>\n    <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"><\/script>\n    <script src="https://unpkg.com/react@16/umd/react.development.js"><\/script>\n    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"><\/script>\n    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"><\/script>\n    <script src="https://unpkg.com/lodash@4.17.11/lodash.js"><\/script>\n    <script src="http://butterfly-home.oss-cn-beijing.aliyuncs.com/butterflies.js"><\/script>\n    <script id="caterpillar-script"><\/script>\n  </body>\n  </html>\n  ',n.index_css="\n  .flow-page {\n    height: 100%;\n    width: 100%;\n    .flow-canvas{\n      position: relative;\n      height: 100%;\n      width: 100%;\n    }\n  }\n  ",n.index_jsx="\n  const mockData = {\n    nodes: [{\n      id: '1',\n      name: '张三',\n      type: 'people',\n      left: 300,\n      top: 50,\n      Class: People\n    }, {\n      id: '2',\n      name: '查找联系人',\n      type: 'search',\n      left: 150,\n      top: 200,\n      Class: Search\n    }, {\n      id: '3',\n      name: '查找亲属',\n      type: 'search',\n      left: 300,\n      top: 200,\n      Class: Search\n    }, {\n      id: '4',\n      name: '查找夫妻',\n      type: 'search',\n      left: 450,\n      top: 200,\n      Class: Search\n    }, {\n      id: '5',\n      name: '非日常活动区',\n      type: 'search',\n      left: 150,\n      top: 350,\n      Class: Computer\n    }, {\n      id: '6',\n      name: '首次入住酒店',\n      type: 'search',\n      left: 300,\n      top: 350,\n      Class: Computer\n    }, {\n      id: '7',\n      name: '非夫妻同房',\n      type: 'search',\n      left: 450,\n      top: 350,\n      Class: Computer\n    }, {\n      id: '8',\n      name: '嫌疑判断',\n      type: 'suspect',\n      left: 300,\n      top: 500,\n      Class: Judgment\n    }, {\n      id: '9',\n      name: '在逃人员冒用身份',\n      type: 'suspect',\n      left: 300,\n      top: 600,\n      Class: People\n    }],\n    edges: [\n    {\n      source: '1',\n      target: '2'\n    }\n    , {\n      source: '1',\n      target: '3'\n    }, \n    {\n      source: '1',\n      target: '4'\n    }\n    , {\n      source: '2',\n      target: '5'\n    }, {\n      source: '3',\n      target: '6'\n    }, {\n      source: '4',\n      target: '7'\n    }, {\n      source: '5',\n      target: '8'\n    }, {\n      source: '6',\n      target: '8'\n    }, {\n      source: '7',\n      target: '8'\n    }, {\n      source: '8',\n      target: '9'\n    }\n    ]\n  };\n  \n  class Flow extends React.Component {\n    constructor() {\n      super();\n      this.canvas = null;\n    }\n    componentDidMount() {\n      // css里面的类名限制太死了\n      let root = document.getElementById('dag-canvas');\n      this.canvas = new Canvas({\n        root: root,\n        disLinkable: true, // 可删除连线\n        linkable: false,    // 可连线\n        draggable: true,   // 可拖动\n        zoomable: true,    // 可放大\n        moveable: true,    // 可平移\n        theme: {\n          edge: {\n            type: 'Flow',\n            Class: TestEdge\n          },\n          endpoint: {\n            position: ['Top', 'Bottom']\n          }\n        }\n      });\n      this.canvas.draw(mockData);\n      // this.canvas.zoom(0.5);\n    }\n    render() {\n      return (\n        <div className='flow-page'>\n          <div className=\"flow-canvas\" id=\"dag-canvas\">\n          </div>\n        </div>\n      );\n    }\n  }\n  \n  ReactDOM.render(<Flow />, document.querySelector('#mountNode'));\n  ",n.node_jsx="\n  class BaseNode extends Node {\n    constructor(opts) {\n      super(opts);\n      this.options = opts;\n    }\n    draw = (opts) => {\n      let container = $('<div class=\"base-node\"></div>')\n                      .css('top', opts.top)\n                      .css('left', opts.left)\n                      .attr('id', opts.id);\n  \n      let logoContainer = $('<div class=\"logo-container\"></div>');\n      logoContainer.append(this.genLogo());\n  \n      let content = $('<p class=\"text\"></p>').text(opts.options.name);\n  \n      container.append(logoContainer).append(content);\n  \n      return container[0];\n    }\n    genLogo = () => {\n      console.log('请重载此方法');\n    }\n  }\n  ",n.node_css="\n.flow-canvas {\n  .base-node {\n    position: absolute;\n    width: 65px;\n    height: 65px;\n    padding: 5px;\n  }\n  .logo-container { \n    width: 30px;\n    height: 30px;\n    border: 1px solid #eee;\n    line-height: 28px;\n    text-align: center;\n    border-radius: 50%;\n    margin: auto;\n  }\n  .text {\n    text-align: center;\n    overflow:hidden;\n    text-overflow:ellipsis;\n    white-space:nowrap\n  }\n  .people {\n\n  }\n  .search {\n\n  }\n  .suspect {\n\n  }\n  .judgment {\n\n  }\n  .computer {\n\n  }\n}\n",n.computer_jsx="\nclass Computer extends BaseNode {\n  constructor(...args) {\n    super(...args);\n  }\n  genLogo = () => {\n    return $('<i class=\"datac-icon\">&#xe6ad;</i>');\n  }\n}\n",n.judgement_jsx="\nclass Judgment extends BaseNode {\n  constructor(opts) {\n    super(opts);\n  }\n  genLogo = () => {\n    return $('<i class=\"datac-icon\">&#xe72b;</i>');\n  }\n}\n",n.people_jsx="\nclass People extends BaseNode {\n  constructor(...args) {\n    super(...args);\n  }\n  genLogo = () => {\n    return $('<i class=\"datac-icon\">&#xe68f;</i>');\n  }\n}\n",n.search_jsx="\nclass Search extends BaseNode {\n  constructor(...args) {\n    super(...args);\n  }\n  genLogo = () => {\n    return $('<i class=\"datac-icon\">&#xe61d;</i>');\n  }\n}\n",n.suspect_jsx="\nclass Suspect extends BaseNode {\n  constructor(...args) {\n    super(...argss);\n  }\n  genLogo = () => {\n    return $('<i class=\"datac-icon\">&#xe61d;</i>');\n  }\n}\n",n.testEdge_jsx="\nclass TestEdge extends Edge {\n  draw = (obj) => {\n    let path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('class', 'butterflies-link');\n    path.addEventListener('mouseover', () => {\n      $(this.labelDom).addClass('xxxx')\n    });\n    return path;\n  }\n  redraw = (sourcePoint, targetPoint, options) => {\n    // 重新计算线条path\n    let path = this.calcPath();\n    this.dom.setAttribute('d', path);\n    if (this.labelDom) {\n      this.redrawLabel();\n    }\n  }\n  drawLabel() {\n    return $('<span class=\"butterflies-label\">X</span>')[0];\n  }\n};\n"},629:function(e,n,t){"use strict";var o=t(630),s=t(947),r=t(977),a=window.CONFIG&&window.CONFIG.prefix||"/example";window.CONFIG?window.CONFIG.prefix=a:window.CONFIG={prefix:a},e.exports=[{path:"/",component:r,childRoutes:[{path:"introduction",component:o},{path:"example",component:s}]}]},630:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var s=t(0),r=t(631),a=t(942),i=t(944);t(946);var l=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,s.Component),o(n,[{key:"render",value:function(){return s.createElement("div",{className:"introduction-page"},s.createElement(r,null),s.createElement(a,null),s.createElement(i,null))}}]),n}();n.default=l,e.exports=n.default},631:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),r=t(0),a=(o=r)&&o.__esModule?o:{default:o};t(223);t(941);var i=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.default.Component),s(n,[{key:"render",value:function(){return a.default.createElement("section",{className:"outline"},a.default.createElement("div",{className:"description"},a.default.createElement("h2",null,"DATAFLY"),a.default.createElement("p",null,"一个基于数据驱动的节点式编排组件库，让您更方便快捷定制可视化流程图表"),a.default.createElement("div",{className:"operation"},a.default.createElement("a",{className:"ant-btn",href:"https://github.com/alibaba/butterfly/archive/master.zip"},"下载使用"),a.default.createElement("a",{className:"ant-btn ant-btn-primary",href:"#/example"},"图表示例"))),a.default.createElement("div",{className:"graph-container"},a.default.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/outline.gif"})))}}]),n}();n.default=i,e.exports=n.default},683:function(e,n,t){var o={"./af":302,"./af.js":302,"./ar":303,"./ar-dz":304,"./ar-dz.js":304,"./ar-kw":305,"./ar-kw.js":305,"./ar-ly":306,"./ar-ly.js":306,"./ar-ma":307,"./ar-ma.js":307,"./ar-sa":308,"./ar-sa.js":308,"./ar-tn":309,"./ar-tn.js":309,"./ar.js":303,"./az":310,"./az.js":310,"./be":311,"./be.js":311,"./bg":312,"./bg.js":312,"./bm":313,"./bm.js":313,"./bn":314,"./bn.js":314,"./bo":315,"./bo.js":315,"./br":316,"./br.js":316,"./bs":317,"./bs.js":317,"./ca":318,"./ca.js":318,"./cs":319,"./cs.js":319,"./cv":320,"./cv.js":320,"./cy":321,"./cy.js":321,"./da":322,"./da.js":322,"./de":323,"./de-at":324,"./de-at.js":324,"./de-ch":325,"./de-ch.js":325,"./de.js":323,"./dv":326,"./dv.js":326,"./el":327,"./el.js":327,"./en-SG":328,"./en-SG.js":328,"./en-au":329,"./en-au.js":329,"./en-ca":330,"./en-ca.js":330,"./en-gb":331,"./en-gb.js":331,"./en-ie":332,"./en-ie.js":332,"./en-il":333,"./en-il.js":333,"./en-nz":334,"./en-nz.js":334,"./eo":335,"./eo.js":335,"./es":336,"./es-do":337,"./es-do.js":337,"./es-us":338,"./es-us.js":338,"./es.js":336,"./et":339,"./et.js":339,"./eu":340,"./eu.js":340,"./fa":341,"./fa.js":341,"./fi":342,"./fi.js":342,"./fo":343,"./fo.js":343,"./fr":344,"./fr-ca":345,"./fr-ca.js":345,"./fr-ch":346,"./fr-ch.js":346,"./fr.js":344,"./fy":347,"./fy.js":347,"./ga":348,"./ga.js":348,"./gd":349,"./gd.js":349,"./gl":350,"./gl.js":350,"./gom-latn":351,"./gom-latn.js":351,"./gu":352,"./gu.js":352,"./he":353,"./he.js":353,"./hi":354,"./hi.js":354,"./hr":355,"./hr.js":355,"./hu":356,"./hu.js":356,"./hy-am":357,"./hy-am.js":357,"./id":358,"./id.js":358,"./is":359,"./is.js":359,"./it":360,"./it-ch":361,"./it-ch.js":361,"./it.js":360,"./ja":362,"./ja.js":362,"./jv":363,"./jv.js":363,"./ka":364,"./ka.js":364,"./kk":365,"./kk.js":365,"./km":366,"./km.js":366,"./kn":367,"./kn.js":367,"./ko":368,"./ko.js":368,"./ku":369,"./ku.js":369,"./ky":370,"./ky.js":370,"./lb":371,"./lb.js":371,"./lo":372,"./lo.js":372,"./lt":373,"./lt.js":373,"./lv":374,"./lv.js":374,"./me":375,"./me.js":375,"./mi":376,"./mi.js":376,"./mk":377,"./mk.js":377,"./ml":378,"./ml.js":378,"./mn":379,"./mn.js":379,"./mr":380,"./mr.js":380,"./ms":381,"./ms-my":382,"./ms-my.js":382,"./ms.js":381,"./mt":383,"./mt.js":383,"./my":384,"./my.js":384,"./nb":385,"./nb.js":385,"./ne":386,"./ne.js":386,"./nl":387,"./nl-be":388,"./nl-be.js":388,"./nl.js":387,"./nn":389,"./nn.js":389,"./pa-in":390,"./pa-in.js":390,"./pl":391,"./pl.js":391,"./pt":392,"./pt-br":393,"./pt-br.js":393,"./pt.js":392,"./ro":394,"./ro.js":394,"./ru":395,"./ru.js":395,"./sd":396,"./sd.js":396,"./se":397,"./se.js":397,"./si":398,"./si.js":398,"./sk":399,"./sk.js":399,"./sl":400,"./sl.js":400,"./sq":401,"./sq.js":401,"./sr":402,"./sr-cyrl":403,"./sr-cyrl.js":403,"./sr.js":402,"./ss":404,"./ss.js":404,"./sv":405,"./sv.js":405,"./sw":406,"./sw.js":406,"./ta":407,"./ta.js":407,"./te":408,"./te.js":408,"./tet":409,"./tet.js":409,"./tg":410,"./tg.js":410,"./th":411,"./th.js":411,"./tl-ph":412,"./tl-ph.js":412,"./tlh":413,"./tlh.js":413,"./tr":414,"./tr.js":414,"./tzl":415,"./tzl.js":415,"./tzm":416,"./tzm-latn":417,"./tzm-latn.js":417,"./tzm.js":416,"./ug-cn":418,"./ug-cn.js":418,"./uk":419,"./uk.js":419,"./ur":420,"./ur.js":420,"./uz":421,"./uz-latn":422,"./uz-latn.js":422,"./uz.js":421,"./vi":423,"./vi.js":423,"./x-pseudo":424,"./x-pseudo.js":424,"./yo":425,"./yo.js":425,"./zh-cn":198,"./zh-cn.js":198,"./zh-hk":426,"./zh-hk.js":426,"./zh-tw":427,"./zh-tw.js":427};function s(e){var n=r(e);return t(n)}function r(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=683},941:function(e,n,t){},942:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var s=t(0);t(943);var r=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,s.Component),o(n,[{key:"render",value:function(){return s.createElement("div",{className:"feature"},s.createElement("div",{className:"feature-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/out-of-the-box.png"}),s.createElement("h4",null,"开箱即用"),s.createElement("p",null,"开箱即用的参考DEMO，可在线调试")),s.createElement("div",{className:"feature-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/easy-to-manage.png"}),s.createElement("h4",null,"方便管理"),s.createElement("p",null,"全方位管理画布，开发者只需要更专注定制化的需求")),s.createElement("div",{className:"feature-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/scalability.png"}),s.createElement("h4",null,"扩展性强"),s.createElement("p",null,"灵活性，可塑性，扩展性优秀")))}}]),n}();n.default=r,e.exports=n.default},943:function(e,n,t){},944:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var s=t(0);t(945);var r=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,s.Component),o(n,[{key:"render",value:function(){return s.createElement("div",{className:"acknowledgment"},s.createElement("h3",null,"感谢有你"),s.createElement("div",{className:"acknowledgment-container"},s.createElement("div",{className:"acknowledgment-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/industry-brain.png"}),s.createElement("p",null,"工业大脑")),s.createElement("div",{className:"acknowledgment-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/industry-brain.png"}),s.createElement("p",null,"DataQ")),s.createElement("div",{className:"acknowledgment-item"},s.createElement("img",{src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/industry-brain.png"}),s.createElement("p",null,"DataV"))))}}]),n}();n.default=r,e.exports=n.default},945:function(e,n,t){},946:function(e,n,t){},947:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=c(t(0)),i=c(t(150)),l=c(t(10));function c(e){return e&&e.__esModule?e:{default:e}}var d=t(948),p=t(952);t(976);var u=(s=o=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.fetchData=function(){t.props.tpl.getTpl().then(function(e){var n=e.tplDatas;if(Array.isArray(n)){var o=n.map(function(e){return{id:e.id,title:e.name,src:e.thumbnail,href:"/#/example/?tpl="+e.id+"&file=index_html"}});t.setState({chartGalleryDatas:o,tplDatas:n})}})},t.state={chartGalleryDatas:[],tplDatas:[]},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.default.Component),r(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props,n=(e.tpl,e.location.query);return a.default.createElement("div",{className:"example-page"},n.tpl&&n.file?a.default.createElement(p,{tpl:n.tpl,file:n.file,tplDatas:this.state.tplDatas}):a.default.createElement(d,{chartGalleryDatas:this.state.chartGalleryDatas}))}}]),n}(),o.propTypes={tpl:l.default.object},s);n.default=i.default.connect(["tpl"],u),e.exports=n.default},948:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var a=t(0),i=t(10),l=t(949);t(951);var c=(s=o=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.Component),r(n,[{key:"render",value:function(){var e=this.props.chartGalleryDatas;return a.createElement("div",{className:"chart-gallery"},e.map(function(e){return a.createElement(l,{key:e.id,title:e.title,src:e.src,href:e.href})}))}}]),n}(),o.propTypes={chartGalleryDatas:i.array},s);n.default=c,e.exports=n.default},949:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var s=t(0);t(950);var r=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,s.Component),o(n,[{key:"render",value:function(){return s.createElement("div",{className:"chart-card"},s.createElement("a",{href:this.props.href},s.createElement("img",{src:this.props.src,alt:""})),this.props.title?s.createElement("h4",null,this.props.title):null)}}]),n}();n.default=r,e.exports=n.default},950:function(e,n,t){},951:function(e,n,t){},952:function(e,n,t){"use strict";var o,s,r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(t(953));var l=t(0),c=t(159).Link,d=t(223),p=d.Menu,u=d.Icon,f=t(10),h=t(221),m=t(954),y=t(973);t(975);var b=(s=o=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.componentWillReceiveProps=function(e){var n=t.props,o=n.tpl,s=n.file,r=n.tplDatas,a=e.tpl,i=e.file,l=e.tplDatas;h.isEqual(r,l)&&o===a&&s===i||t.setState({editorsData:t.genEditorsData(l,o,s)},t.handleRun.bind(t))},t.selectLeftNav=function(e){e.item;var n=e.key;e.selectedKeys;t.setState({leftNavSelected:n})},t.collapseLeftNav=function(){t.setState(function(e){return{navCollapsed:!e.navCollapsed}})},t.genNav=function(e){var n=e.html,o=e.css,s=e.jsx,r=[];return h.concat(n,o,s).forEach(function(e){r.push(l.createElement(p.Item,{key:e.id},l.createElement(c,{to:"/example/?tpl="+t.state.topMenuSelected+"&file="+e.id},l.createElement(u,{type:"file"}),e.name)))}),r},t.state={navCollapsed:!1,topMenuSelected:"",leftNavSelected:"",editorsData:{},transpiledCode:"",transpiledStyle:"",error:null},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,l.Component),a(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.tpl,t=e.file,o=e.tplDatas;n&&this.setState({topMenuSelected:n}),t&&this.setState({leftNavSelected:t}),0!==o.length&&n&&this.setState({editorsData:this.genEditorsData(o,n,t)},this.handleRun.bind(this))}},{key:"render",value:function(){var e=this.props.tplDatas,n=this.state,t=n.topMenuSelected,o=n.leftNavSelected,s=n.navCollapsed,r=[],a=!0,i=!1,c=void 0;try{for(var d,u=e[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var f=d.value;f.id===t&&r.push(this.genNav(f.editorsData))}}catch(e){i=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw c}}return l.createElement("div",{className:"caterpillar-page"},l.createElement("nav",{className:"caterpillar-nav",style:{width:s?50:180}},l.createElement("div",{className:"collapse"+(s?" collapsed":""),onClick:this.collapseLeftNav}),l.createElement(p,{mode:"inline",theme:"dark",selectedKeys:[o],onSelect:this.selectLeftNav,inlineCollapsed:s},r)),l.createElement("div",{className:"caterpillar-content"},l.createElement(m,{editorsDataSelected:this.genEditorsDataSelected(),handleEditorContentChange:this.handleEditorContentChange.bind(this),error:this.state.error}),l.createElement(y,{transpiledCode:this.state.transpiledCode,transpiledStyle:this.state.transpiledStyle})))}},{key:"genEditorsDataSelected",value:function(){var e=this.state,n=e.editorsData,t=e.leftNavSelected;if(h.isEmpty(n)||!t)return{};var o=n.html,s=n.css,r=n.jsx;return h.concat(o,s,r).find(function(e){return e.id===t})}},{key:"genEditorsData",value:function(e,n,t){return 0!==e.length&&n&&t?e.find(function(e){return e.id===n}).editorsData:{}}},{key:"transpileCode",value:function(e){var n={transpiledCode:"",error:""},t=e.reduce(function(e,n){return e+n.content},"");try{n.transpiledCode=i.transform(t,{presets:["es2015","react","stage-0"],plugins:["transform-object-assign","transform-decorators-legacy"]}).code}catch(e){var o=e.message?e.message.replace("\n",""):"Error while transpilation";n.error=o,n.transpiledCode="/* "+o.messsage+" */"}return n}},{key:"transpileStyle",value:function(e){var n={transpiledStyle:"",error:""},t=e.reduce(function(e,n){return e+n.content}," ");return less.render(t,function(e,t){if(e)return n.error=e,n;n.transpiledStyle=t.css}),n}},{key:"updateEditorsData",value:function(e){var n=this.state.editorsData[e.type].map(function(n){return n.id===e.id?e:n}),t=h.cloneDeep(this.state.editorsData);return t[e.type]=n,t}},{key:"dealCSS",value:function(e){var n=this,t=this.updateEditorsData(e),o=this.transpileStyle(t.css),s=o.transpiledStyle,r=o.error;this.setState({editorsData:t,transpiledStyle:s,error:r}),this.state.autorunIsOn&&(clearTimeout(this.autorunDelay),this.autorunDelay=setTimeout(function(){var e=n.transpileStyle(n.state.editorsData.css),t=e.transpiledStyle,o=e.error;n.setState({transpiledStyle:t,error:o})},1e3))}},{key:"dealJSX",value:function(e){var n=this,t=this.updateEditorsData(e),o=this.transpileCode(t.jsx),s=o.transpiledCode,r=o.error;this.setState({editorsData:t,transpiledCode:s,error:r}),this.state.autorunIsOn&&(clearTimeout(this.autorunDelay),this.autorunDelay=setTimeout(function(){var e=n.transpileCode(n.state.editorsData.jsx),t=e.transpiledCode,o=e.error;n.setState({transpiledCode:t,error:o})},1e3))}},{key:"handleEditorContentChange",value:function(e,n){var t=r({},e,{content:n});switch(e.type){case"html":this.setState({editorsData:this.updateEditorsData(t)});break;case"css":case"less":this.dealCSS(t);break;case"js":case"jsx":this.dealJSX(t)}}},{key:"handleRun",value:function(){var e=this.transpileCode(this.state.editorsData.jsx),n=e.transpiledCode,t=e.error,o=this.transpileStyle(this.state.editorsData.css).transpiledStyle;this.setState({transpiledCode:n,transpiledStyle:o,error:t})}}]),n}(),o.contextTypes={router:f.object},o.propTypes={tplDatas:f.array.isRequired,location:f.object},s);e.exports=b},954:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=c(t(0)),i=(c(t(10)),c(t(12))),l=c(t(955));c(t(221));function c(e){return e&&e.__esModule?e:{default:e}}t(222),t(960),t(961),t(963),t(967),t(968),t(969),t(970),t(971),t(972);var d=(s=o=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.default.Component),r(n,[{key:"handleChange",value:function(e){var n=this.props[e];return function(e){return n&&n(e)}}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.props,n=e.editorsDataSelected,t=e.error,o=e.tabSize,s=n.type;return"css"===s&&(s="less"),a.default.createElement("div",{className:"editorbox"},a.default.createElement("div",{className:(0,i.default)("edit-code",{"has-error":!!t})},a.default.createElement(l.default,{name:"codeEditor",mode:s||"text",theme:"tomorrow",value:n.content||"",tabSize:o,width:"auto",height:"auto",onChange:this.props.handleEditorContentChange.bind(this,n),showPrintMargin:!1,editorProps:{$blockScrolling:1/0},enableLiveAutocompletion:!0})),t?a.default.createElement("div",{className:"code-error"},t):a.default.createElement("span",null))}}]),n}(),o.propTypes={},o.defaultProps={tabSize:2,headerHeight:38},s);n.default=d,e.exports=n.default},972:function(e,n,t){},973:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r,a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=t(0),l=(r=i)&&r.__esModule?r:{default:r},c=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(t(284));t(974);var d=(s=o=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={firstEnter:!0},e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i.Component),a(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.transpiledCode,t=e.transpiledStyle;e.error;this.init(),this.setJSX(n),this.setStyle(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.transpiledCode,t=e.transpiledStyle;this.setJSX(n),this.setStyle(t)}},{key:"init",value:function(){var e=document.createElement("iframe");e.id="caterpillar-sandbox",e.setAttribute("scrolling","yes"),e.style.width="100%",e.style.height="100%",e.style.border="0",e.sandbox="allow-scripts allow-same-origin allow-modals allow-popups allow-forms",this.node=e,document.querySelector("#container").appendChild(this.node),this.node.contentWindow.document.open(),this.node.contentWindow.document.write(c.index_html),this.node.contentWindow.document.close()}},{key:"setStyle",value:function(e){if(this.node.contentWindow.document.body){var n=this.node.contentWindow.document.getElementById("caterpillar-style");n&&this.node.contentWindow.document.body.removeChild(n);var t=document.createElement("style");t.id="caterpillar-style",t.innerHTML=e||"";var o=this.node.contentWindow.document.getElementById("mountNode");this.node.contentWindow.document.body.insertBefore(t,o)}}},{key:"setJSX",value:function(e){if(this.node.contentWindow.document.body&&e){var n=this.node.contentWindow.document.getElementById("caterpillar-script");n&&this.node.contentWindow.document.body.removeChild(n);var t=document.createElement("script");t.id="caterpillar-script",t.innerHTML=this.state.firstEnter?"\n      window.onload = function () {\n        try {\n          var mountNode = document.getElementById('mountNode');\n          if (mountNode) {\n              ReactDOM && ReactDOM.unmountComponentAtNode(mountNode)\n              mountNode.innerHTML = ''\n          }\n        } catch(e) {}\n        try {\n          "+e+"\n        } catch(e) {\n          console.log(e)\n        return\n        }\n      }\n      ":"\n      (function() {\n        try {\n          var mountNode = document.getElementById('mountNode');\n          if (mountNode) {\n              ReactDOM && ReactDOM.unmountComponentAtNode(mountNode)\n              mountNode.innerHTML = ''\n          }\n        } catch(e) {}\n        try {\n          "+e+"\n        } catch(e) {\n          console.log(e)\n        return\n        }\n      })();\n      ",this.setState({firstEnter:!1}),this.node.contentWindow.document.body.appendChild(t)}}},{key:"render",value:function(){var e=this.props,n=e.transpiledCode;e.transpiledStyle;return l.default.createElement("div",{ref:"sandbox",id:"container",className:"sandbox border-left"},n?l.default.createElement("span",null):l.default.createElement("div",{className:"center mt2 silver caps regular html-preview"},"HTML Preview"))}}]),n}(),o.defaultProps={bundle:{}},s);n.default=d,e.exports=n.default},974:function(e,n,t){},975:function(e,n,t){},976:function(e,n,t){},977:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=t(0),i=u(a),l=u(t(10)),c=t(159),d=t(223),p=u(t(221));u(t(978));function u(e){return e&&e.__esModule?e:{default:e}}t(983);var f=[{id:"introduction",name:"产品介绍",href:"#/introduction"},{id:"example",name:"图表示例",href:"#/example"},{id:"api",name:"API文档",href:"https://github.com/alibaba/butterfly",target:"_blank"},{id:"tutorial",name:"使用教程",href:"https://github.com/alibaba/butterfly",target:"_blank"}],h=(s=o=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.componentWillReceiveProps=function(e){},t.selectTopMenu=function(e){e.item;var n=e.key;e.selectedKeys;"introduction"!==n&&"example"!==n||t.setState({topMenuSelected:n})},t.selectLeftNav=function(e){e.item;var n=e.key;e.selectedKeys;t.setState({leftNavSelected:n})},t.collapseLeftNav=function(){t.setState(function(e){return{navCollapsed:!e.navCollapsed}})},t.genNav=function(e){var n=e.html,o=e.css,s=e.jsx,r=[];return p.default.concat(n,o,s).forEach(function(e){r.push(i.default.createElement(d.Menu.Item,{key:e.id},i.default.createElement(c.Link,{to:"/example/?tpl="+t.state.topMenuSelected+"&file="+e.id},i.default.createElement(d.Icon,{type:"file"}),e.name)))}),r},t.state={navCollapsed:!1,topMenuSelected:"introduction",leftNavSelected:""},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.Component),r(n,[{key:"componentDidMount",value:function(){var e=this.props.location,n=e.pathname;e.query;""===n?this.context.router.replace(n+"/introduction"):"/"===n&&this.context.router.replace(n+"introduction"),-1!==n.indexOf("/example")&&this.setState({topMenuSelected:"example"})}},{key:"render",value:function(){var e=this.state.topMenuSelected,n=[],t=!0,o=!1,s=void 0;try{for(var r,a=f[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;n.push(i.default.createElement(d.Menu.Item,{key:l.id},l.target?i.default.createElement("a",{href:l.href,target:"_blank"},l.name," "):i.default.createElement("a",{href:l.href},l.name," ")))}}catch(e){o=!0,s=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw s}}return i.default.createElement("div",{className:"data-asset-frame"},i.default.createElement("header",{className:"data-asset-header"},i.default.createElement("div",{className:"logo"},i.default.createElement("h1",null,i.default.createElement("img",{className:"header-img",src:"http://butterfly-home.oss-cn-beijing.aliyuncs.com/logo.png",alt:""}),"DATAFLY")),i.default.createElement("div",{className:"menu"},i.default.createElement(d.Menu,{mode:"horizontal",selectedKeys:[e],onSelect:this.selectTopMenu},n)),i.default.createElement("div",{className:"extra"},i.default.createElement(d.Menu,{mode:"horizontal",selectable:!1}))),i.default.createElement("section",{className:"data-asset-main"},this.props.children))}}]),n}(),o.contextTypes={router:l.default.object},o.propTypes={},s);n.default=h,e.exports=n.default},983:function(e,n,t){}});